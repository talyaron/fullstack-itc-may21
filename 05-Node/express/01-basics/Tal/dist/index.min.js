var express=require("express"),app=express(),port=process.env.PORT||3e3,bodyParser=require("body-parser"),Ajv=require("ajv"),ajv=new Ajv,fs=require("fs");app.use(express.static("public"));var Students=function(){function e(){this.list=[]}return e.prototype.addStudent=function(e){this.list.push(e)},e}(),students=new Students;app.get("/style.css",function(e,t){var s=fs.readFileSync("style.css");t.send(s)}),app.use(bodyParser.json()),app.get("/",function(e,t){t.send("Hello World!")}),app.get("/blabla",function(e,t){t.send("Bla bla!")}),app.post("/testPost",function(e,t){console.log(e.body),t.send({ok:!0})}),app.post("/addStudent",function(e,t){try{var s=ajv.compile({type:"object",properties:{name:{type:"string"},id:{type:"integer"}},required:["name","id"],additionalProperties:!1}),n=e.body;if(!s(n))throw s.errors.forEach(function(e){return console.log(e.message)}),new Error("Invalid data was transferd");students.addStudent(n),console.log(students.list),t.send(e.body)}catch(e){console.log(e),t.status(400).send({error:e.message})}}),app.listen(port,function(){console.log("Example app listening at http://localhost:"+port)});