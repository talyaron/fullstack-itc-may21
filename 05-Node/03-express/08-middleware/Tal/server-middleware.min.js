"use strict";exports.__esModule=!0;var express=require("express"),app=express(),cookieParser=require("cookie-parser");function getName(e,o,s){var n,a,i,t=e.cookies.cookieName;t?(n=JSON.parse(t),console.log(n),a=n.name,e.name=a):(i=JSON.stringify({name:"Golan"}),o.cookie("cookieName",i,{maxAge:3e8,httpOnly:!0}),e.name=void 0),s()}function isGolan(e,o,s){"Golan"===e.name?(console.log("This is Golan!"),s()):(console.log("This is not Golan"),o.status(401).send({erorr:"User is not authorised to  in this route"}))}app.use(express.json()),app.use(cookieParser()),app.use(getName),app.get("/getData",isGolan,function(e,o){e.name&&console.log("we got the name anfd it is ",e.name),o.send({ok:!0})}),app.get("/user",function(e,o){console.log(e.cookies);var s=e.cookies.cookieName,n=JSON.parse(s);console.log(n);var a=n.name;console.log(a),o.send({name:a})}),app.use(express.static("public")),app.listen(3e3,function(){console.log("listen on 3000")});