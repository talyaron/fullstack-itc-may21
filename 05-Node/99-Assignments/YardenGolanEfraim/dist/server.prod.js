"use strict";function _classCallCheck(e,s){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,s){for(var r=0;r<s.length;r++){var t=s[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function _createClass(e,s,r){return s&&_defineProperties(e.prototype,s),r&&_defineProperties(e,r),e}var express=require("express"),app=express(),cookieParser=require("cookie-parser"),port=process.env.PORT||3e3;app.use(express.json());var Ajv=require("ajv"),ajv=new Ajv;app.use(express.static("public")),app.use(cookieParser());var Users=function(){function t(e,s,r){_classCallCheck(this,t),this.name=e,this.email=s,this.password=r,this.createdSurvey=[]}return _createClass(t,[{key:"newUser",value:function(e){this.push(e)}}]),t}(),Surveys=function e(s,r){_classCallCheck(this,e),this.surveyID=Math.random().toString(16).slice(2),this.title=s,this.admin=r,this.questions=[]},Questions=function e(s){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[{voterID:voterID,score:score}];_classCallCheck(this,e),this.title=s,this.questionID=Math.random().toString(16).slice(2),this.voters=r},users=new Users;app.post("/createUser",function(e,s){try{var r=ajv.compile({type:"object",properties:{username:{type:"string"},password:{type:"string"},email:{type:"string"}},required:["username","password","email"],additionalProperties:!1}),t=e.body;if(!r(t))throw r.errors.forEach(function(e){return console.log(e.message)}),new Error("Invalid data was transferd");users.newUser(new Users(t.username,t.email,t.password)),console.log(users),s.send(users)}catch(e){console.log(e),s.status(400).send({error:e.message})}}),app.listen(port,function(){console.log("Server listen on port",port)});