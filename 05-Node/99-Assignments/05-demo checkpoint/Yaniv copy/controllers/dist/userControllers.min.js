"use strict";exports.__esModule=!0,exports.allUsers=exports.details=exports.logout=exports.login=exports.register=exports.welcome=void 0;var secret=require("../../secret/dist/secret").secret,jwt=require("jsonwebtoken"),_a=require("../../models/dist/usersModel"),Users=_a.Users,User=_a.User;function welcome(e,s){try{var r=e.userIndex,t=(new Users).users[r].username;s.send({h1Text:"Awesome App",message:t+", you're already logged in"})}catch(e){console.error(e),s.status(500).send(e.message)}}function register(e,s){try{var r=e.body,t=r.email,o=r.username,n=r.password,u=r.imageUrl,a=r.favColor,c=(new Users).addUser(t,o,n,u,a).userUuid,i=jwt.sign({userUuid:c},secret,{expiresIn:1800});s.cookie("currentUser",i,{maxAge:18e5,httpOnly:!0}),s.send({title:"Cheers, "+o+"!",text:"You are our newest user!"})}catch(e){console.error(e),s.status(500).send(e.message)}}function login(e,s){try{var r=e.userIndex,t=(new Users).users[r],o=t.username,n=t.userUuid,u=jwt.sign({userUuid:n},secret,{expiresIn:1800});s.cookie("currentUser",u,{maxAge:18e5,httpOnly:!0}),s.send({title:"Welcome back, "+o+"!",text:"Enjoy your visit!"})}catch(e){console.error(e),s.status(500).send(e.message)}}function logout(e,s){try{var r=e.userIndex,t=(new Users).users[r].username;s.clearCookie("currentUser"),s.send({username:t})}catch(e){console.error(e),s.status(500).send(e.message)}}exports.welcome=welcome,exports.register=register,exports.login=login,exports.logout=logout,exports.details=function(e,s){try{var r=e.userIndex,t=(new Users).users[r];s.send({user:t})}catch(e){console.error(e),s.status(500).send(e.message)}},exports.allUsers=function(e,s){try{var r=new Users;s.send({users:r})}catch(e){console.error(e),s.status(500).send(e.message)}};