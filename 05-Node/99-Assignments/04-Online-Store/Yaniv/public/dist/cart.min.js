var __awaiter=this&&this.__awaiter||function(t,a,c,u){return new(c=c||Promise)(function(e,r){function o(t){try{i(u.next(t))}catch(t){r(t)}}function n(t){try{i(u.throw(t))}catch(t){r(t)}}function i(t){var r;t.done?e(t.value):((r=t.value)instanceof c?r:new c(function(t){t(r)})).then(o,n)}i((u=u.apply(t,a||[])).next())})},__generator=this&&this.__generator||function(e,o){var n,i,a,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},t={next:r(0),throw:r(1),return:r(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function r(r){return function(t){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,i&&(a=2&r[0]?i.return:r[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,r[1])).done)return a;switch(i=0,a&&(r=[2&r[0],a.value]),r[0]){case 0:case 1:a=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,i=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!(a=0<(a=c.trys).length&&a[a.length-1])&&(6===r[0]||2===r[0])){c=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){c.label=r[1];break}if(6===r[0]&&c.label<a[1]){c.label=a[1],a=r;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(r);break}a[2]&&c.ops.pop(),c.trys.pop();continue}r=o.call(e,c)}catch(t){r=[6,t],i=0}finally{n=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,t])}}};function getStore(){return __awaiter(this,void 0,void 0,function(){var r,e,o;return __generator(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,axios.get("/store/mall")];case 1:return r=t.sent(),e=r.data.store,renderCartProducts(e.products,cartProductsToRender),[3,3];case 2:return o=t.sent(),console.error(o.message),[3,3];case 3:return[2]}})})}function renderCartProducts(n,t){try{var r=document.querySelector(".products"),e=document.querySelector("#pay"),o=void 0,i=0<t.length,a=0,c=0;i?(o='\n            <div class="products__item products__item--headers">\n                <h4>Remove</h4>\n                <h4>Product Image</h4>\n                <h4>Product Name</h4>\n                <h4>Left in Stock</h4>\n                <h4>Total Price</h4>\n                <h4>Quantity</h4>\n            </div>'+t.map(function(r){var t=n.findIndex(function(t){return t.productUuid===r.productUuid}),e=n[t].inStock+" left",o=5<n[t].inStock?"green":"orange";return a+=r.totalPrice,c+=r.quantity,'\n                <div class="products__item product-row" id="'+r.productUuid+'">\n                    <div class="product-row__item product-row__item--remove">\n                        <i class="fas fa-trash remove-from-cart" title="Remove '+r.productName+' from cart"></i>\n                    </div>\n                    <a href="./product.html?productUuid='+r.productUuid+'" class="product-row__item product-row__item--img">\n                        <img src="'+n[t].productImage+'" title="'+r.productName+'"/>\n                    </a>\n                    <a href="./product.html?productUuid='+r.productUuid+'" class="product-row__item product-row__item--name">\n                        <h3>'+r.productName+'</h3>\n                    </a>\n                    <div class="product-row__item product-row__item--stock" style="color:'+o+'">'+e+'</div>\n                    <h4 class="product-row__item product-row__item--total">'+(Math.round(100*r.totalPrice)/100).toFixed(2)+'$</h4>\n                    <div class="product-row__item product-row__item--quantity">\n                        <input type="number" class="update-cart-qunatity" min="0" max="'+(r.quantity+n[t].inStock)+'" value="'+r.quantity+'" />\n                    </div>\n                </div>'}).join("")+('\n            <div class="products__item product-row total">\n                <h3>Total:</h3>\n                <h3 class="product-row__item product-row__item--total">'+(Math.round(100*a)/100).toFixed(2)+'$</h3>\n                <div class="product-row__item product-row__item--quantity">\n                    <h3>'+c+"</h3>\n                </div>\n            </div>"),e.classList.remove("hide")):(o='<p>Your cart is empty... <a href="./store.html?storeUuid=mall">Click here</a> to do some shopping!</p>',e.classList.add("hide")),r.innerHTML=o}catch(t){console.error(t.message)}}getStore();