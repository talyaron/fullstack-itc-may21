"use strict";exports.__esModule=!0,exports.getUser=exports.userLogin=exports.userRegister=void 0;var userModel_1=require("../models/userModel"),express=require("express"),app=express(),cookieParser=require("cookie-parser");app.use(express.json()),app.use(cookieParser()),exports.userRegister=function(e,r){try{var s=new userModel_1.User(e.body.id,e.body.name,e.body.email,e.body.password,[]);if(""===e.body.name&&""===e.body.email&&""===e.body.password)throw new Error("Please Fill the inputs");var o=userModel_1.addUser(s);r.send({ok:"Welcome "+e.body.name,allUser:o})}catch(e){r.status(500).send({error:""+e})}},exports.userLogin=function(r,s){try{var e=userModel_1.readUsers();if(!e.some(function(e){return e.email===r.body.email&&e.password===r.body.password}))throw new Error("User not Found");var o=e.find(function(e){return e.email==r.body.email&&e.password===r.body.password});s.cookie("cookieName",JSON.stringify(o),{maxAge:300303030,httpOnly:!1}),s.send(o)}catch(e){s.status(404).send({error:""+e})}},exports.getUser=function(e,r){var s=JSON.parse(e.cookies.cookieName);console.log(s),r.send(s)};