"use strict";exports.__esModule=!0,exports.Books=exports.Book=void 0;var uuidv4=require("uuid").v4,fs=require("fs"),path=require("path"),booksJsonPath=path.resolve(__dirname,"../books.json"),readBooksJson=function(){try{var o=fs.readFileSync(booksJsonPath);return JSON.parse(o)}catch(o){console.error(o.message)}},Book=function(o,t){this.bookUuid=uuidv4(),this.createdDate=new Date,this.title=o,this.author=t};exports.Book=Book;var Books=function(){function o(){this.books=readBooksJson()}return o.prototype.updateBooksJson=function(){try{fs.writeFileSync(booksJsonPath,JSON.stringify(this.books))}catch(o){console.error(o.message)}},o.prototype.addBook=function(o,t){try{var e=new Book(o,t),r=e.bookUuid;return this.books.push(e),this.updateBooksJson(),r}catch(o){console.error(o)}},o.prototype.searchBooks=function(o,t){try{var e=JSON.parse(JSON.stringify(this.books)),r=new RegExp(o,"gmi"),s=new RegExp(t,"gmi");return""===o&&""==t?e:(""!==o&&(e=e.filter(function(o){return r.test(o.title)})),""!==t&&(e=e.filter(function(o){return s.test(o.author)})),e)}catch(o){console.error(o)}},o}();exports.Books=Books;