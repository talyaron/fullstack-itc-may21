"use strict";exports.__esModule=!0,exports.getSearchedBooks=exports.postNewBook=exports.getAllBooks=void 0;var secret=require("../../secret/dist/secret").secret,jwt=require("jsonwebtoken"),_a=require("../../models/dist/booksModel"),Book=_a.Book,Books=_a.Books;function getAllBooks(o,e){try{var s=new Books,t=0===s.books.length?"Your books list is empty. You should really read more...":s.books;e.send({books:t})}catch(o){console.error(o),e.status(500).send(o.message)}}function postNewBook(o,e){try{var s=new Books,t=o.body,r=t.title,k=t.author,a=s.addBook(r,k),n=jwt.sign({bookUuid:a},secret,{expiresIn:1800});e.cookie("newestBookUuid",n,{maxAge:18e5,httpOnly:!0}),e.send(s.books)}catch(o){console.error(o),e.status(500).send(o.message)}}function getSearchedBooks(o,e){try{var s=new Books,t=o.query,r=t.title,k=t.author,a=s.searchBooks(r,k),n=0===a.length?"No books found üëÅ‚Äçüó®":a;e.send({books:n})}catch(o){console.error(o),e.status(500).send(o.message)}}exports.getAllBooks=getAllBooks,exports.postNewBook=postNewBook,exports.getSearchedBooks=getSearchedBooks;