"use strict";exports.__esModule=!0,exports.searchBooksData=exports.createUser=void 0;var userModel_1=require("../models/userModel"),secret_1=require("../secret/secret"),fs=require("fs"),express=require("express"),app=express(),cookieParser=require("cookie-parser"),jwt=require("jsonwebtoken");app.use(express.json()),app.use(cookieParser()),exports.createUser=function(r,e){var s=r.body,o=s.name,a=s.bookName,t=new userModel_1.User(o,a),n=new userModel_1.Users;n.createUser(t);var c=userModel_1.readUsers().find(function(e){return e.name===r.body.name&&e.bookName===r.body.bookName}),i=jwt.sign(c,secret_1.secret);e.cookie("cookieName",JSON.stringify(i),{maxAge:101011010,httpOnly:!0}),e.send(n)},exports.searchBooksData=function(e,r){var s=e.body.name,o=(new userModel_1.Users).searchBooks(s);r.send(o),console.log(o)};