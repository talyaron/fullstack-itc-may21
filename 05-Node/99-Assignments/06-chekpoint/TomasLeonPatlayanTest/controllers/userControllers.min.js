"use strict";exports.__esModule=!0,exports.searchBooksData=exports.getAllUsers=exports.createUser=void 0;var userModel_1=require("../models/userModel"),secret_1=require("../secret/secret"),fs=require("fs"),express=require("express"),app=express(),cookieParser=require("cookie-parser"),jwt=require("jsonwebtoken");app.use(express.json()),app.use(cookieParser()),exports.createUser=function(s,e){var r=s.body,o=r.name,a=r.bookName,t=new userModel_1.User(o,a),n=new userModel_1.Users;n.createUser(t);var c=userModel_1.readUsers().find(function(e){return e.name===s.body.name&&e.bookName===s.body.bookName}),u=jwt.sign(c,secret_1.secret);e.cookie("cookieName",JSON.stringify(u),{maxAge:101011010,httpOnly:!0}),e.send(n)},exports.getAllUsers=function(e,s){var r=new userModel_1.Users;s.send(r)},exports.searchBooksData=function(e,s){var r=e.body.name;console.log(r);var o=(new userModel_1.Users).searchBooks(r);s.send(o),console.log(o)};