"use strict";var express=require("express"),app=express(),cookieParser=require("cookie-parser"),port=process.env.PORT||5e3;app.use(express.json());var Ajv=require("ajv"),ajv=new Ajv;app.use(express.static("public")),app.use(cookieParser());var user="";app.post("/createUser",function(e,r){try{var s=ajv.compile({type:"object",properties:{firstName:{type:"string"},lastName:{type:"string"}},required:["firstName","lastName"],additionalProperties:!1}),o=e.body;if(!s(o))throw s.errors.forEach(function(e){return console.log(e.message)}),new Error("Invalid data was transferd");user="".concat(o.firstName," ").concat(o.lastName),console.log(user);var a=JSON.stringify({user:user});r.cookie("cookieName",a,{maxAge:3e8,httpOnly:!0}),r.send(user)}catch(e){console.log(e),r.status(400).send({error:e.message})}}),app.get("/user",function(e,r){var s=e.cookies.cookieName,o=JSON.parse(s).user;r.send({user:o})}),app.listen(port,function(){console.log("Server listen on port",port)});