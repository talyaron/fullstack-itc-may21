var __awaiter=this&&this.__awaiter||function(e,o,s,l){return new(s=s||Promise)(function(r,t){function i(e){try{a(l.next(e))}catch(e){t(e)}}function n(e){try{a(l.throw(e))}catch(e){t(e)}}function a(e){var t;e.done?r(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(i,n)}a((l=l.apply(e,o||[])).next())})},__generator=this&&this.__generator||function(r,i){var n,a,o,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,a&&(o=2&t[0]?a.return:t[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,t[1])).done)return o;switch(a=0,o&&(t=[2&t[0],o.value]),t[0]){case 0:case 1:o=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,a=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(o=0<(o=s.trys).length&&o[o.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!o||t[1]>o[0]&&t[1]<o[3])){s.label=t[1];break}if(6===t[0]&&s.label<o[1]){s.label=o[1],o=t;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(t);break}o[2]&&s.ops.pop(),s.trys.pop();continue}t=i.call(r,s)}catch(e){t=[6,e],a=0}finally{n=o=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};function getAllItems(){return __awaiter(this,void 0,void 0,function(){var t,r,i,n;return __generator(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,axios.get("/items/all")];case 1:if(t=e.sent(),r=t.data,i=t.error)throw i;return renderItems(r.items),[3,3];case 2:return n=e.sent(),console.error(n.message),[3,3];case 3:return[2]}})})}var addItemForm=document.querySelector("#add-item-form");function addItem(s){return __awaiter(this,void 0,Promise,function(){var t,r,i,n,a,o;return __generator(this,function(e){switch(e.label){case 0:if(e.trys.push([0,2,,3]),s.preventDefault(),t=s.target.elements.itemDetail1.value,r=s.target.elements.itemDetail2.value,!t||!r)throw new Error("missing details");return[4,axios.post("/items/",{itemDetail1:t,itemDetail2:r})];case 1:if(i=e.sent(),n=i.data,a=i.error)throw a;return renderItems(n.items),s.target.reset(),[3,3];case 2:return o=e.sent(),console.error(o.message),[3,3];case 3:return[2]}})})}function renderItems(e){try{var t=document.querySelector(".items"),r=e.map(function(e){return'\n            <div class="items__item item" id="'+e.itemUuid+'" style="border: 1px solid black; border-radius: 10px;">\n                <h2 class="item__item item__item--detail-1">'+e.itemDetail1+'</h2>\n                <p class="item__item item__item--detail-2">'+e.itemDetail2+'</p>\n                <button style="background-color: darkred; color: white; display: inline-block;" class="item__item item__item--delete" onclick="removeItem(\''+e.itemUuid+'\')">DELETE</button>\n                <button style="background-color: blue; color: white; display: inline-block;" class="item__item item__item--update" onclick="renderUpdateItemForm(\''+e.itemUuid+"')\">UPDATE</button>\n            </div>"}).join("");t.innerHTML=r}catch(e){console.error(e.message)}}function removeItem(a){return __awaiter(this,void 0,void 0,function(){var t,r,i,n;return __generator(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,axios.delete("/items/"+a)];case 1:if(t=e.sent(),r=t.data,i=t.error)throw i;return renderItems(r.items),[3,3];case 2:return n=e.sent(),console.error(n.message),[3,3];case 3:return[2]}})})}function renderUpdateItemForm(e){try{var t=document.querySelector("#"+e),r='\n            <form class="items__item items__item--update-form item" id="'+e+'" onsubmit="updateItem(event)">\n                <input class="item__item item__item--detail-1" name="updatedItemDetail1" value='+t.querySelector(".item__item--detail-1").innerText+' />\n                <input class="item__item item__item--detail-2" name="updatedItemDetail2" value='+t.querySelector(".item__item--detail-2").innerText+' />\n                <input type="submit" class="item__item item__item--update" style="background-color: blue; color: white; display: inline-block;" value="UPDATE" />\n            </form>';t.innerHTML=r}catch(e){console.error(e.message)}}function updateItem(c){return __awaiter(this,void 0,void 0,function(){var t,r,i,n,a,o,s,l,m,u;return __generator(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),c.preventDefault(),t=c.target.parentElement,r=t.getAttribute("id"),i=c.target.elements.updatedItemDetail1.value,n=c.target.elements.updatedItemDetail2.value,c.target.reset(),[4,axios.put("/items/",{itemUuid:r,updatedItemDetail1:i,updatedItemDetail2:n})];case 1:if(a=e.sent(),o=a.data,s=a.error)throw s;return l=o.item,m='\n        <div class="items__item item" id="'+l.itemUuid+'">\n        <h2 class="item__item item__item--detail-1">'+l.itemDetail1+'</h2>\n        <p class="item__item item__item--detail-2">'+l.itemDetail2+'</p>\n        <button style="background-color: darkred; color: white; display: inline-block;" class="item__item item__item--delete" onclick="removeItem(\''+l.itemUuid+'\')">DELETE</button>\n        <button style="background-color: blue; color: white; display: inline-block;" class="item__item item__item--update" onclick="renderUpdateItemForm(\''+l.itemUuid+"')\">UPDATE</button>\n        </div>",c.target.reset(),t.innerHTML=m,[3,3];case 2:return u=e.sent(),console.error(u.message),[3,3];case 3:return[2]}})})}addItemForm.addEventListener("submit",addItem),getAllItems();