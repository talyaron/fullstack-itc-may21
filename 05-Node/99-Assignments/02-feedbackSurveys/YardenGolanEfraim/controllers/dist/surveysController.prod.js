"use strict";var models=require("../models"),Ajv=require("ajv");exports.addSurvey=function(e,r){try{var s=ajv.compile({type:"object",properties:{adminEmail:{type:"string"},surveyName:{type:"string"}},required:["surveyName","adminEmail"],additionalProperties:!1}),a=e.body;if(!s(a))throw s.errors.forEach(function(e){return console.log(e.message)}),new Error("Invalid data was transferd");users.users.map(function(e,r){e.email===a.adminEmail&&(users.users[r].createdSurvey.push(new Survey(a.surveyName,a.adminEmail)),selectedAdmin=users.users[r],selectedAdminIndex=r)}),r.send(selectedAdmin)}catch(e){console.log(e),r.status(400).send({error:e.message})}};