"use strict";function getAdminUser(){var r,t;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=document.querySelector("h1"),e.next=4,regeneratorRuntime.awrap(axios.get("/admin"));case 4:return t=e.sent,e.next=7,regeneratorRuntime.awrap(t.data.name);case 7:r.innerText=e.sent,renderArrayToDom(t.data.createdSurvey),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0);case 14:case"end":return e.stop()}},null,null,[[0,11]])}function handleSurvey(r){var t,n,a;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),e.prev=1,t=r.target.elements.survey.value,e.next=5,regeneratorRuntime.awrap(axios.get("/admin"));case 5:return n=e.sent,e.next=8,regeneratorRuntime.awrap(axios.post("/surveys/addSurvey",{surveyName:t,adminEmail:n.data.email}));case 8:return a=e.sent,e.next=11,regeneratorRuntime.awrap(renderArrayToDom(a.data.createdSurvey));case 11:r.target.reset(),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),console.error(e.t0);case 17:case"end":return e.stop()}},null,null,[[1,14]])}function renderArrayToDom(e){try{var r=document.querySelector(".holder"),t="";e.forEach(function(e){t+='<div class="holder__survey" onclick=\'moveToSurveyEdit("'.concat(e.surveyID,"\")' id='").concat(e.surveyID,'\'>\n                        <div class="holder__survey__header">Survey:</div>\n                        <div class="holder__survey__taskDisplay">').concat(e.title,'</div>\n                    </div>\n                    <div class="holder__delete" onclick=\'deleteSurvey("').concat(e.surveyID,"\")'>Delete</div>")}),r.innerHTML=t}catch(e){console.error(e)}}function deleteSurvey(e){try{axios.delete("/surveys/deleteSurvey/".concat(e)).then(function(e){renderArrayToDom(e.data.createdSurvey)})}catch(e){console.error(e)}}function moveToSurveyEdit(e){try{axios.get("/surveys/sendSurvey?id=".concat(e)),window.location.href="/surveyedit.html"}catch(e){console.error(e)}}window.addEventListener("load",getAdminUser()),document.querySelector(".form-field").addEventListener("submit",handleSurvey);