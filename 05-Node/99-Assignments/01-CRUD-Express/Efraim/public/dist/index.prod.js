"use strict";function handleTask(e){e.preventDefault();try{var a=e.target.elements.task.value,r=e.target.elements.dueDate.value;return new Promise(function(t,n){fetch("/addListItem",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({task:a,dueDate:r})}).then(function(e){return e.json()}).then(function(e){t(e.list),renderArrayToDom(e.list),alert("Submitted Succesfuly!")}).catch(function(e){n(e)}),e.target.reset()})}catch(e){console.error(e)}}window.addEventListener("load",function(){try{return new Promise(function(t,n){fetch("/getList").then(function(e){return e.json()}).then(function(e){t(e.list),renderArrayToDom(e.list)}).catch(function(e){n(e)})})}catch(e){console.error(e)}});var form=document.querySelector("form");function deleteTask(e){try{return new Promise(function(t,n){fetch("/deleteTask/".concat(e),{method:"DELETE",headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){t(e.list),renderArrayToDom(e.list)}).catch(function(e){n(e)})})}catch(e){console.error(e)}}function updateTask(e){try{var a=document.getElementById("".concat(e,"update")).value;return new Promise(function(t,n){fetch("/updateTask",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e,newTaskName:a})}).then(function(e){return e.json()}).then(function(e){t(e.list.list),renderArrayToDom(e.list.list),alert("updated succefully!")}).catch(function(e){n(e)})})}catch(e){console.error(e)}}function updateStatus(e){try{return new Promise(function(t,n){fetch("/updateStatus",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e})}).then(function(e){return e.json()}).then(function(e){t(e.list.list),renderArrayToDom(e.list.list)}).catch(function(e){n(e)})})}catch(e){console.error(e)}}function editTaskKeepText(r){try{return new Promise(function(n,t){var a=document.getElementById("".concat(r,"update"));fetch("/getList").then(function(e){return e.json()}).then(function(e){n(e.list);var t=e.list.filter(function(e){return e.itemID===r});a.placeholder="",a.value=t[0].item}).catch(function(e){t(e)})})}catch(e){console.error(e)}}function dateUrgency(e){try{return(new Date(e)-new Date)/1e3<86400?"red":(new Date(e)-new Date)/1e3<259200?"rgb(220, 220, 2)":"blue"}catch(e){console.error(e)}}function renderArrayToDom(t){var n,a;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=document.querySelector(".holder"),a="",e.next=5,regeneratorRuntime.awrap(t.sort(function(e,t){return new Date(e.dueDate)-new Date(t.dueDate)}));case 5:return e.next=7,regeneratorRuntime.awrap(t.forEach(function(e){var t;"Incomplete"===e.status?(t=dateUrgency(e.dueDate),a+='<div class="holder__item" id=\''.concat(e.itemID,'\'>\n                <div class="holder__item__header">Task:</div>\n                <div class="holder__item__taskDisplay">').concat(e.item,'</div>\n                <input class="holder__item__task" id="').concat(e.itemID,'update" placeholder="Edit Task, Click Update!"  value="" onclick=\'editTaskKeepText("').concat(e.itemID,"\")'>\n                <div class='button button--update' onclick='updateTask(\"").concat(e.itemID,'")\'>UPDATE</div>\n                <div class="holder__item__header">Due Date:</div>\n                <div class="holder__item__dueDate" style="color: ').concat(t,'">').concat(e.dueDate,'</div>\n                <div class="holder__item__header">Status:</div>\n                <div class="holder__item__status" id="').concat(e.itemID,'status">').concat(e.status,"</div>\n                <div class='button button--update-status' id=\"").concat(e.itemID,'status-button" onclick=\'updateStatus("').concat(e.itemID,'")\'>Mark as Complete!</div>\n                <div class="button button--delete" onclick=\'deleteTask("').concat(e.itemID,"\")'>DELETE</div>\n                </div>")):a+='<div class="holder__item" id=\''.concat(e.itemID,'\'>\n                    <div class="holder__item__header">Task:</div>\n                    <div class="holder__item__taskDisplay" style="color: green">').concat(e.item,'</div>\n                    <div class="holder__item__header">Due Date:</div>\n                    <div class="holder__item__dueDate" style="color: green">').concat(e.dueDate,'</div>\n                    <div class="holder__item__header">Status:</div>\n                    <div class="green" id="').concat(e.itemID,'status">').concat(e.status,'</div>\n                    <div class="button button--delete" onclick=\'deleteTask("').concat(e.itemID,"\")'>DELETE</div>\n                    </div>")}));case 7:n.innerHTML=a,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}},null,null,[[0,10]])}form.addEventListener("submit",handleTask);