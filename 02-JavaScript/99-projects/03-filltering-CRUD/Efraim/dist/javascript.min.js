var Product=function(t,e,r){try{this.imgSrc=t,this.description=e,this.year=r,this.id="id"+Math.random().toString(16).slice(2),this.id2="id"+Math.random().toString(16).slice(2),this.id3="id"+Math.random().toString(16).slice(2)}catch(t){console.error(t)}},Products=function(){function t(){this.products=[]}return t.prototype.addProduct=function(t){try{this.products.push(t)}catch(t){console.error(t)}},t.prototype.renderProducts=function(t){try{var e=this.products.map(function(t){return"<div id='"+t.id+'\'  class="shopping-list__item-wrapper"><img class="shopping-list__item-wrapper__item-image" src='+t.imgSrc+' alt=""><div class="shopping-list__item-wrapper__edit" id=\''+t.id2+'\'> - Edit the text and click to save for next time</div><h2  class="shopping-list__item-wrapper__item-name edit" id="'+t.id3+'" contenteditable="true">'+t.description+'</h2><h3  class="shopping-list__item-wrapper__item-year">'+t.year+'</h3><button class="shopping-list__item-wrapper__wrapper__save" type="button"  onclick="saveEdits(\''+t.id+"', '"+t.id2+'\')">Save Edit</button><button class="shopping-list__item-wrapper__wrapper__delete" onclick="deleteProduct(\''+t.id+"')\">Delete</button> </div>"}).join("");t.innerHTML=e}catch(t){console.error(t)}},t.prototype.findIndexes=function(e){return this.products.findIndex(function(t){return t.id===e})},t.prototype.findProduct=function(e){try{var t=this.products.find(function(t){return t.id===e});if(t)return t}catch(t){console.error(t)}},t}(),products=new Products;function commonFunction(){try{var t=document.querySelectorAll(".edit");if(!t)throw new Error("No edit elements detected!");for(var e=0;e<t.length;e++)t[e].innerHTML=nameUpdate[e],products.products[e].description=nameUpdate[e]}catch(t){console.error(t)}}var deleteProduct=function(t){try{var e=document.querySelector(".shopping-list");if(!e)throw new Error("No shopping list detected!");var r=products.findIndexes(t);if(!products)throw new Error("No product list detected!");products.products.splice(r,1),products.renderProducts(e),nameUpdate.splice(r,1),commonFunction(),localStorage.setItem("products",JSON.stringify(products.products)),localStorage.userEdits=JSON.stringify(nameUpdate)}catch(t){console.error(t)}};try{var shoppingListDOM=document.querySelector(".shopping-list");if(!shoppingListDOM)throw new Error("No shopping list to hold items!");products.addProduct(new Product("images/coffee.png","Stainless Steel Travel Mug",2007)),products.addProduct(new Product("images/beanie.png","Boundary Rib Beanie",2010)),products.addProduct(new Product("images/3.png","PUMA 2021 Clash Guernsey",2021)),products.addProduct(new Product("images/4.png","PUMA 2021 Home Guernsey",2017)),products.addProduct(new Product("images/5.png","2020 Three of a Kind Hoodie",2020)),products.addProduct(new Product("images/6.png","Puma 2021 Iconic Tee",2021)),products.addProduct(new Product("images/7.png","PUMA 2021 Training Singlet",2021)),products.addProduct(new Product("images/8.png","Dustin Martin Tee",2019)),products.addProduct(new Product("images/9.png","2021 PUMA Padded Vest",2021)),products.addProduct(new Product("images/10.png","Super Soft Touch Sherrin",2010)),products.addProduct(new Product("images/11.png","Premiers 2020 Wall Flag",2020)),products.addProduct(new Product("images/12.png","Dustin Martin Monatge Wall Flag",2018)),products.renderProducts(shoppingListDOM)}catch(t){console.error(t)}function handleSubmit(t){t.preventDefault();try{var e=t.target.children.imgSrc.value,r=t.target.children.description.value,o=t.target.children.year.value,i=document.querySelector(".shopping-list");if(!i)throw new Error("No shopping list to hold items!");products.addProduct(new Product('"'+e+'"',""+r,parseInt(o))),products.renderProducts(i),nameUpdate.push(""+r),localStorage.userEdits=JSON.stringify(nameUpdate),commonFunction(),localStorage.setItem("products",JSON.stringify(products.products)),console.log(products.products),t.target.reset()}catch(t){console.error(t)}}var nameUpdate=products.products.map(function(t){return t.description});function saveEdits(t,e){var r=products.findIndexes(t),o=document.querySelectorAll(".edit");nameUpdate.length=o.length,nameUpdate[r]=o[r].innerHTML,products.products[r].description=nameUpdate[r],localStorage.userEdits=JSON.stringify(nameUpdate),document.getElementById(""+e).innerHTML="Edits saved!"}function checkEdits(){try{var t=JSON.parse(localStorage.getItem("products"));null!=t&&(addToDom1(t),products.products=t),null!=localStorage.userEdits&&(nameUpdate=JSON.parse(localStorage.userEdits),commonFunction())}catch(t){console.error(t)}}var findProductbySearchTerm=function(t,e){try{for(var o=new RegExp(e,"gmi"),r=products.products.reduce(function(t,e,r){return o.test(e.description)&&t.push(r),t},[]),i=t.filter(function(t){return o.test(t.description)}),n=0;n<r.length;n++)i[n].description=nameUpdate[r[n]];return i}catch(t){console.error(t)}},addToDom1=function(t){try{var e=document.querySelector(".shopping-list");if(!e)throw new Error("No shopping list available!");if(e.innerHTML="",0===t.length)return void(e.innerHTML="no results to show");t.forEach(function(t){return e.innerHTML+="<div id='"+t.id+'\'  class="shopping-list__item-wrapper"><img class="shopping-list__item-wrapper__item-image" src='+t.imgSrc+' alt=""><div class="shopping-list__item-wrapper__edit" id=\''+t.id2+'\'> - Edit the text and click to save for next time</div><h2  class="shopping-list__item-wrapper__item-name edit" id="'+t.id3+'" contenteditable="true">'+t.description+'</h2><h3  class="shopping-list__item-wrapper__item-year">'+t.year+'</h3><button class="shopping-list__item-wrapper__wrapper__save" type="button" onclick="saveEdits(\''+t.id+"', '"+t.id2+'\')">Save Edits</button><button class="shopping-list__item-wrapper__wrapper__delete" onclick="deleteProduct(\''+t.id+"')\">Delete</button> </div>"})}catch(t){console.error(t)}},addToDom2=function(t){try{var e=document.querySelector(".shopping-list");if(!e)throw new Error("No shopping list available!");if(e.innerHTML="",0===t.length)return void(e.innerHTML="no results to show");t.forEach(function(t){return e.innerHTML+="<div id='"+t.id+'\'  class="shopping-list__item-wrapper"><img class="shopping-list__item-wrapper__item-image" src='+t.imgSrc+' alt=""><h2  class="shopping-list__item-wrapper__item-name edit" id="'+t.id3+'" >'+t.description+'</h2><h3  class="shopping-list__item-wrapper__item-year">'+t.year+"</h3>"})}catch(t){console.error(t)}},handleSubmit1=function(t){try{t.preventDefault();var e=t.target.elements.search.value;if(!e)throw new Error("No value being read for search term!");var r=findProductbySearchTerm(products.products,e);addToDom2(r),t.target.reset()}catch(t){console.error(t)}},handleKeyUp=function(t){try{t.preventDefault();var e=t.target.value;if(!e)throw new Error("No value being read for search term!");var r=findProductbySearchTerm(products.products,e);addToDom2(r)}catch(t){console.error(t)}},filterYear=function(t){try{var o=parseInt(t.target.value);if(!o)throw new Error("No value being read for filter!");var e=products.products.reduce(function(t,e,r){return e.year===o&&t.push(r),t},[]),r=products.products.filter(function(t){return t.year===o});console.log(r);for(var i=0;i<e.length;i++)r[i].description=nameUpdate[e[i]];addToDom2(r)}catch(t){console.error(t)}},resetButton=function(){try{addToDom1(products.products),commonFunction()}catch(t){console.error(t)}},selectList=function(){try{var t=["2000","2001","2002","2003","2004","2005","2006","2007","2008","2009","2010","2011","2012","2013","2014","2015","2016","2017","2018","2019","2020","2021","2022"],e=document.querySelector(".wrapper__div__select-filter");e.id="mySelect";for(var r=0;r<t.length;r++){var o=document.createElement("option");o.value=t[r],o.text=t[r],e.appendChild(o)}}catch(t){console.error(t)}};