function setScrollHeight(){var e=document.querySelector(".messages");e.scrollTop=e.scrollHeight}function goBack(){window.location.href="index.html"}window.onload=function(e){setScrollHeight()};var urlSearchParams=new URLSearchParams(window.location.search),params=Object.fromEntries(urlSearchParams.entries()),allContacts=JSON.parse(localStorage.getItem("contacts")),thisContact=allContacts.filter(function(e){return e.contactId===params.contactId}),contactName=document.querySelector(".nav__contact h2");contactName.innerHTML=""+thisContact[0].name;var contactImg=document.querySelector(".nav__img__wrapper");function updateLastSent(){var e=document.querySelector(".nav__contact p"),t=parseInt(thisContact[0].chats.length-1);e.innerHTML="Last Sent: "+thisContact[0].chats[t].timeStamp+" "}function renderMessages(e){var t=document.querySelector(".messages"),n="";thisContact[0].chats.forEach(function(e){n+='<div class="single__message" oncontextmenu = "contextHandler();return false;" >\n    <p>'+e.message+' </p>\n        <div class="single__message__timestamp"> '+e.timeStamp+" </div>\n            </div>",t.innerHTML=n})}function openCamera(){console.log("open the camera")}function contextHandler(){document.getElementById("contextMenu").style.display="block"}contactImg.innerHTML='<img class="nav__img"\nsrc="'+thisContact[0].imgUrl+'"\nalt = "" >';var doc=document.querySelector("html");function closeContext(){document.getElementById("contextMenu").style.display="none"}doc.addEventListener("click",closeContext);var form=document.querySelector(".form");function logSubmit(e){var t=e.target.elements.message.value,n=new Date,a={};a.message=t,a.timeStamp=n,thisContact[0].chats.push(a),e.preventDefault(),e.target.reset(),renderMessages(thisContact),updateLastSent(),setScrollHeight(),document.querySelector(".fa-microphone").style.display="block",document.querySelector(".fa-paper-plane").style.display="none",localStorage.setItem("contacts",JSON.stringify(allContacts))}function removeMic(){document.getElementById("input").addEventListener("keyup",function(){document.querySelector(".fa-microphone").style.display="none",document.querySelector(".fa-paper-plane").style.display="block"})}form.addEventListener("submit",logSubmit),removeMic(),updateLastSent(),renderMessages(thisContact);var microphone=document.querySelector(".fa-microphone");microphone.disabled="true";