var Contact=function(t,c,e,o){void 0===o&&(o=[{message:"New Message",timeStamp:new Date}]),this.name=t,this.imgUrl=c,this.phone=e,this.chats=o,this.contactId=Math.random().toString(16).slice(2)},Contacts=function(){function t(){this.contacts=[]}return t.prototype.addContact=function(t){try{this.contacts.unshift(t)}catch(t){console.error(t)}},t.prototype.renderProducts=function(t){try{var c=this.contacts.map(function(t){return'<div class="holder__contact" id="'+t.contactId+'" onclick="hRef(\''+t.contactId+'\')"><img class="holder__contact__image" src="'+t.imgUrl+'"><div class="holder__contact__name">'+t.name+'</div><div class="holder__contact__chat">'+t.chats[0].message+'</div><div class="holder__contact__timestamp">'+t.chats[0].timeStamp+'</div><div class="holder__contact__unread" id="unread">6</div><div class="holder__contact__unread" id="delete" onclick="deleteContact(\''+t.contactId+"')\">x</div></div>"}).join("");t.innerHTML=c}catch(t){console.error(t)}},t.prototype.findIndexes=function(c){return this.contacts.findIndex(function(t){return t.contactId===c})},t}(),contacts=new Contacts;function hRef(t){window.location.href="./private-chat.html?contactId="+t}function handleSubmit(t){t.preventDefault();try{var c=t.target.children.photo.value,e=t.target.children.name.value,o=t.target.children.number.value,n=document.querySelector(".holder");if(!n)throw new Error("No holder!");contacts.addContact(new Contact(""+e,""+c,o)),contacts.renderProducts(n),localStorage.setItem("contacts",JSON.stringify(contacts.contacts)),closeForm(),t.target.reset()}catch(t){console.error(t)}}var deleteContact=function(t){try{window.event.cancelBubble=!0;var c=document.querySelector(".holder");if(!c)throw new Error("No shopping list detected!");var e=contacts.findIndexes(t);if(!contacts)throw new Error("No product list detected!");contacts.contacts.splice(e,1),contacts.renderProducts(c),console.log(contacts),localStorage.setItem("contacts",JSON.stringify(contacts.contacts))}catch(t){console.error(t)}},addToDom=function(t){try{var e=document.querySelector(".holder");if(!e)throw new Error("No holder available!");if(e.innerHTML="",0===t.length)return void(e.innerHTML="no results available");t.forEach(function(t){var c=parseInt(t.chats.length-1);e.innerHTML+='<div class="holder__contact" id="'+t.contactId+'" onclick="hRef(\''+t.contactId+'\')"><img class="holder__contact__image" src="'+t.imgUrl+'"><div class="holder__contact__name"><a href="./private-chat.html?contactId='+t.contactId+'">'+t.name+'</a></div><div class="holder__contact__chat">'+t.chats[c].message+'</div><div class="holder__contact__timestamp">'+t.chats[c].timeStamp+'</div><div class="holder__contact__unread id="unread">6</div><div class="holder__contact__unread id="delete" onclick="deleteContact(\''+t.contactId+"')\">x</div></div>"})}catch(t){console.error(t)}},findContactSearch=function(t,c){try{var e=new RegExp(c,"gmi");return t.filter(function(t){return e.test(t.name)})}catch(t){console.error(t)}},handleKeyUp=function(t){try{t.preventDefault();var c=t.target.value;if(!c)throw new Error("No value being read for search term!");var e=findContactSearch(contacts.contacts,c);addToDom(e)}catch(t){console.error(t)}};function checkEdits(){var t=JSON.parse(localStorage.getItem("contacts"));null!=t&&(addToDom(t),contacts.contacts=t,console.log(contacts.contacts.map(function(t){return console.log(t.chats)})))}