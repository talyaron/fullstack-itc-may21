<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Julie's Game</title>
  </head>
  <style>
    .piece {
      position: absolute;
      width: 50px;
    }

    #board {
      width: 95vw;
      height: 95vh;
      background-color: whitesmoke;
      position: relative;
      border: 3px solid black;
    }

    .form-wrapper {
      background-color: aqua;
      width: 95vw;
      border: 3px solid black;
    }
  </style>
  <body>
    <div class="form-wrapper">
      <h1>Please Add a Character</h1>
      <form>
        <input id="name" type="text" placeholder="Name of piece" />

        <input id="url" type="url" placeholder="Upload the URL for the image" />

        <input
          id="positionX"
          type="text"
          placeholder="starting position x coordinate"
        />

        <input
          id="positionY"
          type="text"
          placeholder="starting position y coordinate"
        />

        <input id="submit" type="submit" />
      </form>
    </div>
    <div id="board"></div>
  </body>

  <script>
    // Get by id all the 5 form inputs
    const name = document.getElementById("name");
    const url = document.getElementById("url");
    const positionX = document.getElementById("positionX");
    const positionY = document.getElementById("positionY");
    const submitButton = document.getElementById("submit");

    // Add an event liostener to the submit button so when it's clicked it logs whatever was put in the inputs. It will call a function called "logPiece."

    submitButton.addEventListener("click", logPiece);

    let newpiece;
    // Piece is defined in the global scope

    function logPiece() {
      console.log(name.id, name.value);
      console.log(url.id, url.value);
      console.log(positionX.id, positionX.value);
      console.log(positionY.id, positionY.value);
    }
    // Good. It is console.logging these.

    //    Now I have to get this information to put the character on the board. I must write a function that takes these inputs and makes them into an instance of the class "Piece."

    // The variables defined above, name, url etc. are in the global scope and should be availebl to the createPiece method of the Piece class.

    class Piece {
      constructor(name, url, positionX, positionY) {
        this.name = name;
        this.url = url;
        this.positionX = positionX;
        this.positionY = positionY;
        this.board = document.querySelector("#board");
        // This defines all the attributes that a Piece will have
        document
          .querySelector("#board")
          .addEventListener("keydown", () => this.keydown());

        this.createPiece();
        this.movePiece();
      }
      createPiece() {
        this.piece.setAttribute("name", this.name);
        this.piece = document.createElement("img");
        this.piece.setAttribute("src", this.url);
        this.piece.style.left = `${this.position.positionX}%`;
        this.piece.style.top = `${this.position.positionY}%`;
        this.piece.classList.add("piece");
        this.board.appendChild(this.piece);
      }

      //   Creat the piece by setting th atribute of name, creating an image html element to house the new piece, giving the attribute of whatever url we choose, give it a left and right position that is a percentage, and append it to the board.

      // All pieces need to move in the same way, so movePIece should be a method of the Piece class.

      //   movePIece takes in an event of keycode and calls the left, right, up and dopwn functions below, which tell it to move 5 pixels in the required direction.

      movePiece(evt) {
        switch (evt.keyCode) {
          case 37:
            piece.left();
            break;
          case 39:
            piece.right();
            break;
          case 38:
            piece.up();
            break;
          case 40:
            piece.down();
            break;
        }
      }

      left() {
        this.piece = document.querySelector(".piece");
        this.piece.style.left = parseInt(this.positionY) - 5 + "px";
      }

      right() {
        this.piece = document.querySelector(".piece");
        this.piece.style.left = parseInt(this.positionY) + 5 + "px";
      }

      up() {
        this.piece = document.querySelector(".piece");
        this.piece.style.top = parseInt(this.positionX) - 5 + "px";
      }

      down() {
        this.piece = document.querySelector(".piece");
        this.piece.style.top = parseInt(this.positionX) + 5 + "px";
      }

      pressAndMove() {
        window.addEventListener("keydown", movePiece);
      }

      // Need a function to activate the movePiece function when the arrow is pressed. The Event Listerer takes in an event of "keydown" and calls the function movePiece. Finally, need to make it so that pressAndMove function is called when the page loads, so used window.onload, as in previous exercise.
    }

    window.onload = pressAndMove;

    const yoda = new Piece(
      "yoda",
      "https://static.wikia.nocookie.net/starwars/images/c/c3/Yoda_TPM_RotS.png/revision/latest?cb=20130810185858",
      50,
      50
    );

    console.log(yoda);
  </script>
</html>

<!-- 1) create a form to insert a apiece in a game (image, starting position (x,y), id);
// 2) get all the inforamation from your form;
// 3) create a new instance of the piece on the board (with a class constructore);
// this will add the piece to the board -->
